# 6版CoCTRPG キャラクター作成ツール

## 概要

「6版CoCTRPG キャラクター作成ツール」は、テーブルトップロールプレイングゲーム「クトゥルフ神話TRPG（第6版）」の探索者（キャラクター）をウェブブラウザ上で手軽に作成・管理するためのツールです。 能力値のダイスロール、各種派生値の自動計算、技能ポイントの割り振り、キャラクターデータの保存・読み込み、PDF出力など、キャラクター作成を支援する多彩な機能を備えています。

## 主な機能

### 1. キャラクター基本情報入力
* 探索者名、職業、学校・学位、出身、性別、年齢の入力。

### 2. 能力値設定
* STR (筋力), CON (体力), SIZ (体格), DEX (敏捷性), APP (外見), INT (知性), POW (精神力), EDU (教育) の手動入力。
* 各能力値に対応したダイスロール機能（3D6, 2D6+6, 3D6+3）。
* 能力値に基づく5倍値を自動表示。

### 3. 派生能力値の自動計算
* 正気度 (SAN = POW × 5)
* 耐久力 (HP = (CON + SIZ) / 2)
* マジックポイント (MP = POW)
* アイデア (INT × 5)
* 幸運 (POW × 5)
* 知識 (EDU × 5)
* ダメージボーナス (STRとSIZの合計から自動計算)

### 4. 技能設定
* **技能ポイント計算**:
    * 職業技能ポイント: EDU × 20 (デフォルト)、EDU × 15、EDU × 10 から選択可能。ボーナスポイントの加算も可能。
    * 興味技能ポイント: INT × 10。ボーナスポイントの加算も可能。
* **技能値割り振り**:
    * 戦闘技能、射撃技能、探索技能、知識技能の各カテゴリ。
    * 各技能について、初期値、職業P、興味P、成長分、その他を入力し、合計値を自動計算。
    * 回避 (DEX × 2)、母国語 (EDU × 5) は自動計算。
* **技能成長チェック**: 成長した技能にチェックを入れることが可能。
* **カスタム技能追加**: 任意の技能名と初期値を設定して技能テーブルに追加可能。

### 5. 職業テンプレート
* predefinedの職業テンプレート（探偵、医者、ジャーナリスト、大学教授、警察官）を選択し、関連技能値を自動入力。

### 6. キャラクター画像
* キャラクターの画像をアップロードし、プレビュー表示。
* 画像の削除、ドラッグ＆ドロップでのアップロードに対応。

### 7. PDFシート用カスタム情報入力
* 芸術、製作、その他カスタム技能、カスタム火器の名称をPDF出力用に設定可能。

### 8. データ管理
* **保存**: 作成したキャラクターデータをブラウザのローカルストレージに保存。
* **読み込み**: ローカルストレージに保存されたキャラクターデータをリストから選択して再読み込み。
* **エクスポート**: キャラクターデータをJSONファイル形式でダウンロード。
* **インポート**: JSONファイル形式のキャラクターデータを読み込み。

### 9. 出力機能
* **印刷**: キャラクターシートのプレビューをブラウザの印刷機能で印刷。
* **PDF生成**: キャラクターシートをデザインされた背景画像付きのPDFファイルとして生成・ダウンロード。

### 10. ユーザーインターフェース
* **タブ切り替え**:「基本情報」「技能」「戦闘」「プレビュー」のタブで情報を整理。
* **ダークモード**: ライトモードとダークモードのテーマ切り替え機能。
* **アコーディオン**: 技能カテゴリごとの表示/非表示切り替え。

## 使用技術

* **フロントエンド**:
    * HTML5
    * CSS3
    * JavaScript (ES6+)
* **外部ライブラリ**:
    * Font Awesome (アイコンフォント)
    * Google Fonts (Noto Sans JP - フォント)
    * jsPDF (クライアントサイドPDF生成ライブラリ)
    * html2canvas (HTML要素を画像に変換するライブラリ)

## ファイル構成

```
.
├── index.html         # アプリケーションのメインHTMLファイル
├── styles.css         # スタイルシート
├── script.js          # JavaScriptロジック
└── character-sheet.png # (推奨) PDF生成時に使用されるキャラクターシート背景画像
```

## セットアップと使用方法

1.  上記ファイル（`index.html`, `styles.css`, `script.js`）を同じディレクトリに配置します。
2.  PDF生成機能を利用する場合は、`character-sheet.png`（またはスクリプト内で指定された画像ファイル名のもの）も同じディレクトリに配置してください。
3.  ウェブブラウザで `index.html` を開くと、キャラクター作成ツールが起動します。

### 基本的な使い方
1.  **基本情報タブ**: 探索者の名前や職業などの基本情報を入力します。
2.  **能力値**: 各能力値を手入力するか、「ダイス」アイコンのボタンでランダムに生成します。
3.  **技能タブ**:
    * EDUとINTの値に基づき、職業技能ポイントと興味技能ポイントが自動計算されます。必要に応じて計算方法やボーナスポイントを調整します。
    * 各技能カテゴリを開き、ポイントを割り振ります。「職業P」「興味P」などの欄に数値を入力すると、合計値が自動で更新されます。
    * 必要であれば「技能追加」ボタンからカスタム技能を追加できます。
4.  **戦闘タブ**: 主要な戦闘技能の値を参照できます（技能タブと連動）。
5.  **プレビュータブ**: 入力されたキャラクター情報のサマリーを確認できます。
6.  **各種ボタン**:
    * **ランダム生成**: 能力値を一括でランダム生成します。
    * **職業テンプレート**: ドロップダウンから職業を選択し、推奨技能値を適用します。
    * **保存**: 現在のキャラクターデータをブラウザに保存します。探索者名がキーとなります。
    * **保存データ読込**: 保存済みのキャラクターを読み込みます。
    * **エクスポート**: キャラクターデータをJSONファイルとして出力します。
    * **インポート**: JSON形式のキャラクターデータを読み込みます。
    * **印刷**: プレビュータブの内容を印刷します。
    * **PDF生成**: キャラクターシートをPDFとして生成します。

## 注意点

* キャラクターデータはブラウザのローカルストレージに保存されます。ブラウザの履歴やキャッシュをクリアすると保存データが消える可能性があるため、重要なデータはエクスポート機能を利用してバックアップを取ることを推奨します。
* PDF生成機能は、`character-sheet.png` という名前の画像ファイルが `index.html` と同じディレクトリに存在することを前提としています。ファイルが見つからない場合、PDF生成時にアラートが表示され、背景画像なしで生成されるか、エラーとなる可能性があります。
* 一部のブラウザ環境では、PDF生成機能が正常に動作しない場合があります。

## 著作権情報

© 2025 クトゥルフ神話TRPG キャラクター作成ツール

